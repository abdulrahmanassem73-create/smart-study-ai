import{r,j as s,U as b,L as S}from"./vendor-ui-ARy-o6ek.js";import{u as y,g as j,A as E,C as F,a as I,b as k,c as L,B as o,t as e,s as U,S as f,I as u,d as M,e as _,f as z,h as B}from"./index-CVOPyXAZ.js";import{L as x}from"./label-Bsjya-7d.js";import{m as H}from"./vendor-motion-D4ajpNSI.js";import"./vendor-charts-msDMqvam.js";import"./vendor-supabase-Djqvfl2V.js";const P="dark:bg-white/10 dark:backdrop-blur-md dark:border-white/10";function K(){const[,i]=y(),h=r.useMemo(()=>j(),[]),[c,A]=r.useState("signin"),[p,N]=r.useState(h?.name||""),[d,v]=r.useState(h?.email||""),[n,C]=r.useState(""),[g,l]=r.useState(!1),t=_();r.useEffect(()=>{j()&&i("/")},[i]);const w=async()=>{l(!0);try{c==="signup"?(await z({name:p,email:d,password:t?n:"local"}),e.success("تم إنشاء الحساب وتسجيل الدخول")):(await B({email:d,password:t?n:"local"}),e.success("تم تسجيل الدخول")),i("/")}catch(a){console.error(a);const m=a?.message;m==="EMAIL_EXISTS"?e.error("هذا البريد مسجل بالفعل. جرّب تسجيل الدخول."):m==="NOT_FOUND"?e.error("لا يوجد حساب بهذا البريد. أنشئ حساباً جديداً."):e.error("تحقق من البيانات وأعد المحاولة")}finally{l(!1)}};return s.jsx(E,{children:s.jsxs("section",{className:"mx-auto w-full max-w-2xl space-y-6","data-source":"src/pages/Auth.tsx:72:7",children:[s.jsxs("div",{className:"space-y-2","data-source":"src/pages/Auth.tsx:73:9",children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold","data-source":"src/pages/Auth.tsx:74:11",children:"الحساب"}),s.jsx("p",{className:"text-muted-foreground leading-7","data-source":"src/pages/Auth.tsx:75:11",children:"تسجيل الدخول/إنشاء حساب لحفظ مكتبتك ونتائج التحليل بشكل دائم على السحابة."})]}),s.jsx(H.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.25,ease:"easeOut"},children:s.jsxs(F,{className:M(P),children:[s.jsx(I,{className:"pb-3",children:s.jsx(k,{className:"text-2xl",children:c==="signup"?"إنشاء حساب":"تسجيل الدخول"})}),s.jsxs(L,{className:"space-y-5",children:[s.jsx("div",{className:"grid place-items-center","data-source":"src/pages/Auth.tsx:93:15",children:s.jsxs(o,{variant:t?"default":"secondary",className:"w-full max-w-sm gap-2",disabled:g||!t,onClick:async()=>{if(!t){e.error("السحابة غير مفعلة حالياً. تأكد من مفاتيح Supabase ثم أعد البناء.");return}e.message("جاري الاتصال بجوجل...");try{l(!0),await U()}catch{e.error("تعذر بدء تسجيل الدخول بجوجل"),l(!1)}},children:[s.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 48 48","aria-hidden":"true","data-source":"src/pages/Auth.tsx:114:19",children:[s.jsx("path",{fill:"#FFC107",d:"M43.611 20.083H42V20H24v8h11.303C33.677 32.654 29.223 36 24 36c-6.627 0-12-5.373-12-12s5.373-12 12-12c3.059 0 5.842 1.154 7.962 3.038l5.657-5.657C34.046 6.053 29.268 4 24 4 12.955 4 4 12.955 4 24s8.955 20 20 20 20-8.955 20-20c0-1.341-.138-2.65-.389-3.917z","data-source":"src/pages/Auth.tsx:115:21"}),s.jsx("path",{fill:"#FF3D00",d:"M6.306 14.691l6.571 4.819C14.655 16.108 19.027 12 24 12c3.059 0 5.842 1.154 7.962 3.038l5.657-5.657C34.046 6.053 29.268 4 24 4c-7.682 0-14.356 4.333-17.694 10.691z","data-source":"src/pages/Auth.tsx:116:21"}),s.jsx("path",{fill:"#4CAF50",d:"M24 44c5.122 0 9.86-1.964 13.409-5.159l-6.19-5.238C29.218 35.091 26.715 36 24 36c-5.202 0-9.646-3.325-11.271-7.946l-6.52 5.025C9.505 39.556 16.227 44 24 44z","data-source":"src/pages/Auth.tsx:117:21"}),s.jsx("path",{fill:"#1976D2",d:"M43.611 20.083H42V20H24v8h11.303a12.05 12.05 0 0 1-4.084 5.603l.003-.002 6.19 5.238C36.971 39.205 44 34 44 24c0-1.341-.138-2.65-.389-3.917z","data-source":"src/pages/Auth.tsx:118:21"})]}),"Sign in with Google"]})}),s.jsxs("div",{className:"relative","data-source":"src/pages/Auth.tsx:124:15",children:[s.jsx(f,{}),s.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 bg-background px-2 text-xs text-muted-foreground","data-source":"src/pages/Auth.tsx:126:17",children:"أو"})]}),c==="signup"&&s.jsxs("div",{className:"grid gap-2","data-source":"src/pages/Auth.tsx:131:17",children:[s.jsx(x,{htmlFor:"name",children:"الاسم"}),s.jsx(u,{id:"name",value:p,onChange:a=>N(a.target.value),placeholder:"مثال: عبدالرحمن"})]}),s.jsxs("div",{className:"grid gap-2","data-source":"src/pages/Auth.tsx:142:15",children:[s.jsx(x,{htmlFor:"email",children:"البريد الإلكتروني"}),s.jsx(u,{id:"email",value:d,onChange:a=>v(a.target.value),placeholder:"name@example.com"})]}),t&&s.jsxs("div",{className:"grid gap-2","data-source":"src/pages/Auth.tsx:153:17",children:[s.jsx(x,{htmlFor:"password",children:"كلمة المرور"}),s.jsx(u,{id:"password",type:"password",value:n,onChange:a=>C(a.target.value),placeholder:"••••••••"})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2","data-source":"src/pages/Auth.tsx:165:15",children:[s.jsx(o,{className:"gap-2",onClick:w,disabled:g,children:c==="signup"?s.jsxs(s.Fragment,{children:[s.jsx(b,{className:"size-4"}),"إنشاء الحساب"]}):s.jsxs(s.Fragment,{children:[s.jsx(S,{className:"size-4"}),"تسجيل الدخول"]})}),s.jsx(o,{variant:"outline",onClick:()=>A(c==="signup"?"signin":"signup"),children:c==="signup"?"لدي حساب بالفعل":"إنشاء حساب جديد"})]}),s.jsx(f,{}),s.jsx("div",{className:"text-xs text-muted-foreground leading-6","data-source":"src/pages/Auth.tsx:194:15",children:t?"مفعل: Supabase Auth — تسجيل حقيقي + مزامنة سحابية.":"لتفعيل السحابة: ضع VITE_SUPABASE_URL و VITE_SUPABASE_ANON_KEY ثم أعد البناء."})]})]})})]})})}export{K as default};
