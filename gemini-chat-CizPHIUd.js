import{i as a}from"./index-CVOPyXAZ.js";async function w(t){const n=a();if(!n)throw new Error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª: Supabase ØºÙŠØ± Ù…ÙÙØ¹Ù‘Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±");const{data:o,error:i}=await n.functions.invoke("generate-study-content",{body:{action:"chat",commandLabel:t.commandLabel,userMessage:t.userMessage,pageMarkdown:t.pageMarkdown||"",fileId:t.fileId||null,globalSummaries:t.globalSummaries,mode:t.mode||"normal",socratic:!!t.socratic,study_mode:t.study_mode||"balanced"}});if(i)throw new Error("ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù…Ø±ÙƒØ² Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ");const e=o||{},r=String(e.answer||"").trim(),s=Number(e.confidence_score??NaN),c=String(e.reasoning_summary||"").trim();if(!r)throw new Error("ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù…Ø±ÙƒØ² Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ");const u=Number.isFinite(s)?`

> Ù†Ø³Ø¨Ø© Ø§Ù„Ø«Ù‚Ø©: **${Math.round(Math.max(0,Math.min(1,s))*100)}%**`:"",d=c?`

> ğŸ’¡ Ø¯Ù„ÙŠÙ„ Ù…Ù† Ø§Ù„Ù…Ù„Ù: ${c}`:"";return`${r}${d}${u}`.trim()}async function l(t){const n=a();if(!n)throw new Error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª: Supabase ØºÙŠØ± Ù…ÙÙØ¹Ù‘Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±");const{data:o,error:i}=await n.functions.invoke("generate-study-content",{body:{action:"mindmap",text:t.text||"",chunks:Array.isArray(t.chunks)?t.chunks:void 0,fileId:t.fileId||null,refresh:!!t.refresh}});if(i)throw new Error("ÙØ´Ù„ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø°Ù‡Ù†ÙŠØ©");const r=String((o||{}).mermaid||"").trim();if(!r)throw new Error("ÙØ´Ù„ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø°Ù‡Ù†ÙŠØ©");return r}async function f(t){const n=a();if(!n)throw new Error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª: Supabase ØºÙŠØ± Ù…ÙÙØ¹Ù‘Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±");const{data:o,error:i}=await n.functions.invoke("generate-study-content",{body:{action:"exam_generate",fileId:t.fileId||null,title:t.title||"Ø§Ù…ØªØ­Ø§Ù† ØªØ¬Ø±ÙŠØ¨ÙŠ",questionCount:t.questionCount??15,durationSec:t.durationSec??1800}});if(i)throw new Error("ÙØ´Ù„ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†");const e=o||{},r=Array.isArray(e.questions)?e.questions:[];if(!e.examId||!r.length)throw new Error("ÙØ´Ù„ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†");return{examId:String(e.examId),title:String(e.title||"Ø§Ù…ØªØ­Ø§Ù† ØªØ¬Ø±ÙŠØ¨ÙŠ"),durationSec:Number(e.durationSec||1800),blueprint:e.blueprint||{},questions:r}}async function b(t){const n=a();if(!n)throw new Error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª: Supabase ØºÙŠØ± Ù…ÙÙØ¹Ù‘Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±");const{data:o,error:i}=await n.functions.invoke("generate-study-content",{body:{action:"exam_submit",examId:t.examId,fileId:t.fileId||null,answers:t.answers}});if(i)throw new Error("ÙØ´Ù„ ØªØµØ­ÙŠØ­ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†");const e=o||{};return{attemptId:String(e.attemptId||""),score:Number(e.score||0),total:Number(e.total||0),report_markdown:String(e.report_markdown||"").trim(),wrong_items:Array.isArray(e.wrong_items)?e.wrong_items:[],study_plan:Array.isArray(e.study_plan)?e.study_plan:[],weak_topics:Array.isArray(e.weak_topics)?e.weak_topics:[]}}export{l as a,w as c,f as g,b as s};
